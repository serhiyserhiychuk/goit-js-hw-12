{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.image-form');\nconst input = document.querySelector('.image-input');\nconst list = document.querySelector('.image-list');\nconst loader = document.querySelector('#loader-span');\nconst loadBtn = document.querySelector('.button');\n\nlet page = 1;\n\nlet per_page = 40;\n\nlet gallery = new SimpleLightbox('.image-list a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', submitHandler);\n\nconst api = axios.create({\n  baseURL: `https://pixabay.com/api/`,\n  params: {\n    key: '41498783-400257af4926549016a2deb3f',\n    language: 'en',\n    type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\nasync function submitHandler(event) {\n  try {\n    event.preventDefault();\n\n    list.innerHTML = '';\n\n    page = 1;\n\n    const q = input.value.toString();\n\n    loader.classList.replace('is-hidden', 'loader');\n\n    const images = await getImages({\n      q,\n      page,\n      per_page,\n    });\n\n    if (images.totalHits === 0) {\n      loader.classList.replace('loader', 'is-hidden');\n      \n      return iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n\n    renderImages(images.hits);\n\n    gallery.refresh();\n    loader.classList.replace('loader', 'is-hidden');\n    loadBtn.classList.replace('is-hidden', 'load-btn');\n    input.value = '';\n\n    loadBtn.addEventListener('click', loadHandler);\n\n    async function loadHandler() {\n      loader.classList.replace('is-hidden', 'loader');\n\n      page++;\n\n      const images = await getImages({\n        q,\n        page,\n        per_page,\n      });\n\n      if (page >= Math.ceil(images.totalHits / per_page)) {\n        loader.classList.replace('loader', 'is-hidden');\n        loadBtn.classList.replace('load-btn', 'is-hidden');\n        return iziToast.info({\n          message:\n            'We are sorry, but you have reached the end of search results.',\n          position: 'topRight',\n        });\n      }\n\n      renderImages(images.hits);\n      gallery.refresh();\n      loader.classList.replace('loader', 'is-hidden');\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function getImages(params) {\n  try {\n    const responce = await api.get('', { params });\n    return responce.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction renderImages(images = []) {\n  const markup = images.map(\n    image =>\n      `<a href=\"${image.largeImageURL}\"\n            <li class=\"photo-card\">\n            <img class=\"photo\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            <div class=\"card-container\">\n            <p>Likes</p>\n            <p>Views</p>\n            <p>Comments</p>\n            <p>Downloads</p>\n            </div>\n            <div class=\"card-container\">\n            <p>${image.likes}</p>\n            <p>${image.views}</p>\n            <p>${image.comments}</p>\n            <p>${image.downloads}</p>\n            </div>\n            </li>\n            </a>`\n  );\n  list.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["form","input","list","loader","loadBtn","page","per_page","gallery","SimpleLightbox","submitHandler","api","axios","event","q","images","getImages","iziToast","renderImages","loadHandler","error","params","markup","image"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAU,SAAS,cAAc,SAAS,EAEhD,IAAIC,EAAO,EAEPC,EAAW,GAEXC,EAAU,IAAIC,EAAe,gBAAiB,CAChD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEDR,EAAK,iBAAiB,SAAUS,CAAa,EAE7C,MAAMC,EAAMC,EAAM,OAAO,CACvB,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,SAAU,KACV,KAAM,QACN,YAAa,aACb,WAAY,EACb,CACH,CAAC,EAED,eAAeF,EAAcG,EAAO,CAClC,GAAI,CACFA,EAAM,eAAc,EAEpBV,EAAK,UAAY,GAEjBG,EAAO,EAEP,MAAMQ,EAAIZ,EAAM,MAAM,SAAQ,EAE9BE,EAAO,UAAU,QAAQ,YAAa,QAAQ,EAE9C,MAAMW,EAAS,MAAMC,EAAU,CAC7B,EAAAF,EACA,KAAAR,EACA,SAAAC,CACN,CAAK,EAED,GAAIQ,EAAO,YAAc,EACvB,OAAAX,EAAO,UAAU,QAAQ,SAAU,WAAW,EAEvCa,EAAS,MAAM,CACpB,QACE,2EACF,SAAU,UAClB,CAAO,EAGHC,EAAaH,EAAO,IAAI,EAExBP,EAAQ,QAAO,EACfJ,EAAO,UAAU,QAAQ,SAAU,WAAW,EAC9CC,EAAQ,UAAU,QAAQ,YAAa,UAAU,EACjDH,EAAM,MAAQ,GAEdG,EAAQ,iBAAiB,QAASc,CAAW,EAE7C,eAAeA,GAAc,CAC3Bf,EAAO,UAAU,QAAQ,YAAa,QAAQ,EAE9CE,IAEA,MAAMS,EAAS,MAAMC,EAAU,CAC7B,EAAAF,EACA,KAAAR,EACA,SAAAC,CACR,CAAO,EAED,GAAID,GAAQ,KAAK,KAAKS,EAAO,UAAYR,CAAQ,EAC/C,OAAAH,EAAO,UAAU,QAAQ,SAAU,WAAW,EAC9CC,EAAQ,UAAU,QAAQ,WAAY,WAAW,EAC1CY,EAAS,KAAK,CACnB,QACE,gEACF,SAAU,UACpB,CAAS,EAGHC,EAAaH,EAAO,IAAI,EACxBP,EAAQ,QAAO,EACfJ,EAAO,UAAU,QAAQ,SAAU,WAAW,CAC/C,CACF,OAAQgB,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEA,eAAeJ,EAAUK,EAAQ,CAC/B,GAAI,CAEF,OADiB,MAAMV,EAAI,IAAI,GAAI,CAAE,OAAAU,CAAM,CAAE,GAC7B,IACjB,OAAQD,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEA,SAASF,EAAaH,EAAS,GAAI,CACjC,MAAMO,EAASP,EAAO,IACpBQ,GACE,YAAYA,EAAM;AAAA;AAAA,sCAEcA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAQvDA,EAAM;AAAA,iBACNA,EAAM;AAAA,iBACNA,EAAM;AAAA,iBACNA,EAAM;AAAA;AAAA;AAAA,iBAIvB,EACEpB,EAAK,mBAAmB,YAAamB,CAAM,CAC7C"}