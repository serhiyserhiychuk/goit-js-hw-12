{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.image-form');\nconst input = document.querySelector('.image-input');\nconst list = document.querySelector('.image-list');\nconst loader = document.querySelector('#loader-span');\nconst loadBtn = document.querySelector('.button');\n\nlet page = 1;\nlet per_page = 40;\nlet q;\n\nlet gallery = new SimpleLightbox('.image-list a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', submitHandler);\nloadBtn.addEventListener('click', loadHandler);\n\nconst api = axios.create({\n  baseURL: `https://pixabay.com/api/`,\n  params: {\n    key: '41498783-400257af4926549016a2deb3f',\n    language: 'en',\n    type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\nasync function submitHandler(event) {\n  try {\n    event.preventDefault();\n\n    list.innerHTML = '';\n\n    page = 1;\n\n    q = input.value.trim();\n\n    loader.classList.replace('is-hidden', 'loader');\n\n    const images = await getImages({\n      q,\n      page,\n      per_page,\n    });\n\n    if (images.totalHits === 0) {\n      loader.classList.replace('loader', 'is-hidden');\n      loadBtn.classList.replace('load-btn', 'is-hidden');\n\n      return iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n\n    renderImages(images.hits);\n\n    gallery.refresh();\n    loader.classList.replace('loader', 'is-hidden');\n    loadBtn.classList.replace('is-hidden', 'load-btn');\n    input.value = '';\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function loadHandler() {\n  try {\n    loader.classList.replace('is-hidden', 'loader');\n\n    page++;\n\n    const addedImages = await getImages({\n      q,\n      page,\n      per_page,\n    });\n\n    if (page >= Math.ceil(addedImages.totalHits / per_page)) {\n      loader.classList.replace('loader', 'is-hidden');\n      loadBtn.classList.replace('load-btn', 'is-hidden');\n      return iziToast.info({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n        position: 'topRight',\n      });\n    }\n\n    renderImages(addedImages.hits);\n    gallery.refresh();\n    loader.classList.replace('loader', 'is-hidden');\n    window.scrollBy(0, list.firstChild.getBoundingClientRect().height * 2);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function getImages(params) {\n  try {\n    const responce = await api.get('', { params });\n    return responce.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction renderImages(images = []) {\n  const markup = images\n    .map(\n      image =>\n        `<a href=\"${image.largeImageURL}\"\n            <li class=\"photo-card\">\n            <img class=\"photo\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            <div class=\"card-container\">\n            <p>Likes</p>\n            <p>Views</p>\n            <p>Comments</p>\n            <p>Downloads</p>\n            </div>\n            <div class=\"card-container\">\n            <p>${image.likes}</p>\n            <p>${image.views}</p>\n            <p>${image.comments}</p>\n            <p>${image.downloads}</p>\n            </div>\n            </li>\n            </a>`\n    )\n    .join('');\n  list.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["form","input","list","loader","loadBtn","page","per_page","q","gallery","SimpleLightbox","submitHandler","loadHandler","api","axios","event","images","getImages","iziToast","renderImages","error","addedImages","params","markup","image"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAU,SAAS,cAAc,SAAS,EAEhD,IAAIC,EAAO,EACPC,EAAW,GACXC,EAEAC,EAAU,IAAIC,EAAe,gBAAiB,CAChD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEDT,EAAK,iBAAiB,SAAUU,CAAa,EAC7CN,EAAQ,iBAAiB,QAASO,CAAW,EAE7C,MAAMC,EAAMC,EAAM,OAAO,CACvB,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,SAAU,KACV,KAAM,QACN,YAAa,aACb,WAAY,EACb,CACH,CAAC,EAED,eAAeH,EAAcI,EAAO,CAClC,GAAI,CACFA,EAAM,eAAc,EAEpBZ,EAAK,UAAY,GAEjBG,EAAO,EAEPE,EAAIN,EAAM,MAAM,OAEhBE,EAAO,UAAU,QAAQ,YAAa,QAAQ,EAE9C,MAAMY,EAAS,MAAMC,EAAU,CAC7B,EAAAT,EACA,KAAAF,EACA,SAAAC,CACN,CAAK,EAED,GAAIS,EAAO,YAAc,EACvB,OAAAZ,EAAO,UAAU,QAAQ,SAAU,WAAW,EAC9CC,EAAQ,UAAU,QAAQ,WAAY,WAAW,EAE1Ca,EAAS,MAAM,CACpB,QACE,2EACF,SAAU,UAClB,CAAO,EAGHC,EAAaH,EAAO,IAAI,EAExBP,EAAQ,QAAO,EACfL,EAAO,UAAU,QAAQ,SAAU,WAAW,EAC9CC,EAAQ,UAAU,QAAQ,YAAa,UAAU,EACjDH,EAAM,MAAQ,EACf,OAAQkB,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEA,eAAeR,GAAc,CAC3B,GAAI,CACFR,EAAO,UAAU,QAAQ,YAAa,QAAQ,EAE9CE,IAEA,MAAMe,EAAc,MAAMJ,EAAU,CAClC,EAAAT,EACA,KAAAF,EACA,SAAAC,CACN,CAAK,EAED,GAAID,GAAQ,KAAK,KAAKe,EAAY,UAAYd,CAAQ,EACpD,OAAAH,EAAO,UAAU,QAAQ,SAAU,WAAW,EAC9CC,EAAQ,UAAU,QAAQ,WAAY,WAAW,EAC1Ca,EAAS,KAAK,CACnB,QACE,gEACF,SAAU,UAClB,CAAO,EAGHC,EAAaE,EAAY,IAAI,EAC7BZ,EAAQ,QAAO,EACfL,EAAO,UAAU,QAAQ,SAAU,WAAW,EAC9C,OAAO,SAAS,EAAGD,EAAK,WAAW,sBAAuB,EAAC,OAAS,CAAC,CACtE,OAAQiB,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEA,eAAeH,EAAUK,EAAQ,CAC/B,GAAI,CAEF,OADiB,MAAMT,EAAI,IAAI,GAAI,CAAE,OAAAS,CAAM,CAAE,GAC7B,IACjB,OAAQF,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEA,SAASD,EAAaH,EAAS,GAAI,CACjC,MAAMO,EAASP,EACZ,IACCQ,GACE,YAAYA,EAAM;AAAA;AAAA,sCAEYA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAQvDA,EAAM;AAAA,iBACNA,EAAM;AAAA,iBACNA,EAAM;AAAA,iBACNA,EAAM;AAAA;AAAA;AAAA,iBAIlB,EACA,KAAK,EAAE,EACVrB,EAAK,mBAAmB,YAAaoB,CAAM,CAC7C"}